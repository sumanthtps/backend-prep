---
title: Advanced-topics 2
---

### **JUnit 5 ‚Äì Beyond the Basics (More Advanced Concepts)**

JUnit 5 has several **powerful advanced features** that go beyond typical unit
testing. Let's explore additional advanced concepts, including:

‚úÖ **Custom Test Templates**  
‚úÖ **Tagging & Filtering Tests**  
‚úÖ **Conditional Test Execution**  
‚úÖ **Parallel Test Execution**  
‚úÖ **Extensions & Listeners**  
‚úÖ **Repeated Tests**  
‚úÖ **Dependency Injection in Tests**  
‚úÖ **Temporary File System Handling**  
‚úÖ **Assertions with Hamcrest & AssertJ**

---

## **1. Custom Test Templates ‚Äì Reusable Test Structures**

üìå **`@TestTemplate` allows defining reusable test structures** that can be
executed multiple times.

```java
@TestTemplate
@ExtendWith(MyCustomTestProvider.class)
void testTemplate(String input) {
    assertNotNull(input);
}
```

‚úÖ **Useful when the same test logic applies to different datasets**.

---

## **2. Tagging & Filtering Tests ‚Äì Running Selective Tests**

üìå **Use `@Tag` to categorize tests** and run only specific groups.

```java
@Tag("fast")
@Test
void quickTest() {
    assertTrue(5 > 1);
}

@Tag("slow")
@Test
void longRunningTest() {
    Thread.sleep(5000);
    assertTrue(5 > 1);
}
```

### **Run Only "Fast" Tests in Maven**

```sh
mvn test -Dgroups=fast
```

‚úÖ **Filters tests based on speed, functionality, or environment**.

---

## **3. Conditional Test Execution ‚Äì Running Tests Based on Conditions**

üìå **Use `@EnabledIf` and `@DisabledIf` to control test execution dynamically**.

### **1Ô∏è‚É£ Run a Test Only on Windows**

```java
@Test
@EnabledOnOs(OS.WINDOWS)
void testOnWindows() {
    assertTrue(System.getProperty("os.name").contains("Windows"));
}
```

### **2Ô∏è‚É£ Run a Test Only with a Specific Java Version**

```java
@Test
@EnabledOnJre(JRE.JAVA_17)
void testWithJava17() {
    assertEquals(17, Runtime.version().feature());
}
```

### **3Ô∏è‚É£ Disable a Test If a Certain Property is Not Set**

```java
@Test
@EnabledIfSystemProperty(named = "env", matches = "staging")
void testOnlyInStaging() {
    assertTrue(System.getProperty("env").equals("staging"));
}
```

‚úÖ **Improves test reliability by executing only when conditions are met**.

---

## **4. Parallel Test Execution ‚Äì Faster Testing in JUnit 5**

üìå **JUnit 5 allows running tests in parallel for better performance**.

### **1Ô∏è‚É£ Enable Parallel Execution in `junit-platform.properties`**

```
junit.jupiter.execution.parallel.enabled = true
junit.jupiter.execution.parallel.mode.default = concurrent
```

### **2Ô∏è‚É£ Configure Parallel Mode in Code**

```java
@Execution(ExecutionMode.CONCURRENT)
class ParallelTest {
    @Test
    void test1() {
        System.out.println("Test 1 - " + Thread.currentThread().getName());
    }

    @Test
    void test2() {
        System.out.println("Test 2 - " + Thread.currentThread().getName());
    }
}
```

‚úÖ **Reduces total test execution time significantly**.

---

## **5. Extensions & Listeners ‚Äì Extending JUnit Functionality**

üìå **JUnit 5 allows extending its behavior using `@ExtendWith` and listeners**.

### **1Ô∏è‚É£ Creating a Custom Test Lifecycle Logger**

```java
class MyTestLifecycleLogger implements BeforeAllCallback, AfterAllCallback {
    @Override
    public void beforeAll(ExtensionContext context) {
        System.out.println("Before all tests - " + context.getDisplayName());
    }

    @Override
    public void afterAll(ExtensionContext context) {
        System.out.println("After all tests - " + context.getDisplayName());
    }
}

@ExtendWith(MyTestLifecycleLogger.class)
class MyTest {
    @Test
    void test() {
        assertTrue(true);
    }
}
```

‚úÖ **Great for logging test execution and resource management**.

---

## **6. Repeated Tests ‚Äì Running a Test Multiple Times**

üìå **Use `@RepeatedTest` to execute a test multiple times**.

```java
@RepeatedTest(5)
void testMultipleTimes(RepetitionInfo repetitionInfo) {
    System.out.println("Executing test - " + repetitionInfo.getCurrentRepetition());
    assertTrue(true);
}
```

‚úÖ **Useful for **performance testing** and **flaky test detection\*\*.

---

## **7. Dependency Injection in JUnit 5 Tests**

üìå **JUnit 5 supports injecting dependencies into test methods**.

### **1Ô∏è‚É£ Injecting `TestInfo` for Dynamic Test Names**

```java
@Test
void testWithTestInfo(TestInfo testInfo) {
    System.out.println("Running: " + testInfo.getDisplayName());
    assertTrue(true);
}
```

### **2Ô∏è‚É£ Injecting `TestReporter` for Custom Logging**

```java
@Test
void testWithTestReporter(TestReporter testReporter) {
    testReporter.publishEntry("Test Running Successfully");
}
```

‚úÖ **Useful for dynamic test metadata and logging**.

---

## **8. Temporary File System Handling in Tests**

üìå **JUnit 5 provides built-in support for temporary files**.

```java
@Test
void testTempFile(@TempDir Path tempDir) throws IOException {
    Path file = tempDir.resolve("tempfile.txt");
    Files.writeString(file, "Hello, JUnit 5!");

    assertTrue(Files.exists(file));
    assertEquals("Hello, JUnit 5!", Files.readString(file));
}
```

‚úÖ **Automatically deletes temp files after the test**.

---

## **9. Advanced Assertions with Hamcrest & AssertJ**

üìå **Hamcrest & AssertJ provide more flexible and readable assertions**.

### **1Ô∏è‚É£ Hamcrest Matchers ‚Äì More Readable Assertions**

```java
import static org.hamcrest.MatcherAssert.assertThat;
import static org.hamcrest.Matchers.*;

@Test
void testHamcrestAssertions() {
    assertThat(100, is(greaterThan(50)));
    assertThat("JUnit 5", containsString("JUnit"));
}
```

### **2Ô∏è‚É£ AssertJ ‚Äì Fluent Assertions**

```java
import static org.assertj.core.api.Assertions.*;

@Test
void testAssertJ() {
    assertThat(100).isGreaterThan(50);
    assertThat("JUnit 5").contains("JUnit");
}
```

‚úÖ **Improves assertion readability and flexibility**.

---

## **10. Summary of Additional Advanced JUnit 5 Features**

| Feature                       | Description                                              |
| ----------------------------- | -------------------------------------------------------- |
| **Custom Test Templates**     | Reusable test structures (`@TestTemplate`)               |
| **Tagging & Filtering Tests** | Selective test execution (`@Tag`)                        |
| **Conditional Execution**     | Run tests based on system conditions (`@EnabledIf`)      |
| **Parallel Execution**        | Speed up tests with parallel mode                        |
| **Extensions & Listeners**    | Custom JUnit behaviors (`@ExtendWith`)                   |
| **Repeated Tests**            | Run the same test multiple times (`@RepeatedTest`)       |
| **Dependency Injection**      | Injects metadata into tests (`TestInfo`, `TestReporter`) |
| **Temporary Files**           | Manages test files safely (`@TempDir`)                   |
| **Hamcrest & AssertJ**        | Fluent and readable assertions                           |

---

## **11. Questions Based on This Lesson**

1. **How do you run only a specific set of tests in JUnit 5?**
2. **What is the purpose of `@EnabledOnOs(OS.WINDOWS)`?**
3. **How do you enable parallel execution of tests in JUnit 5?**
4. **What is the use of `@RepeatedTest`?**
5. **What is a JUnit extension, and how is it useful?**
6. **How can you create temporary files in JUnit 5?**
7. **What is the difference between Hamcrest and AssertJ?**

---

## **12. Final Thoughts**

‚úÖ **JUnit 5 is more than just a test framework; it provides deep
flexibility**.  
‚úÖ **Using advanced features improves test speed, organization, and
reliability**.  
‚úÖ **Tagging, parallel execution, and dynamic tests make large test suites
efficient**.  
‚úÖ **Mockito, Hamcrest, and AssertJ enhance test readability and
maintainability**.

üîú **Next Step ‚Üí JUnit 5 Integration Testing with Spring Boot!** üöÄ
