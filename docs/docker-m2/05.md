---

title: Docker Configuration Files and Directories
sidebar_position: 31
---------------------

## Introduction

Docker stores its metadata, images, container data, and configuration in a set of well-known directories and files on Linux systems. Understanding these paths is essential for troubleshooting, backups, and custom configuration.

---

## Key Docker Paths on Linux

### 1. `/var/lib/docker`

- **Primary data directory** for Docker.
- Stores:

  - **Images** – Pulled or built images.
  - **Containers** – Metadata and writable layers.
  - **Volumes** – Persisted container data.
  - **Network configs** – User-defined networks.

> Backing up this folder effectively backs up all Docker state.

---

### 2. `/var/lib/docker/overlay2`

- Contains the **union file system layers** for images and containers.
- Uses **OverlayFS** to merge multiple image layers into a single container file
  system.
- When a container runs, a **read-write layer** is mounted on top of the
  read-only image layers here.

---

### 3. `/var/run/docker.sock`

- A **Unix domain socket** used by the Docker CLI to communicate with the Docker
  daemon.
- Acts like a local network interface without using TCP/IP.
- Permissions on this file control who can run Docker commands.

```bash
# Check the socket
ls -l /var/run/docker.sock
```

> Adding a user to the `docker` group grants access to this socket.

---

### 4. `/etc/docker/daemon.json`

- The **configuration file** for the Docker daemon.
- Not always present by default; you can create it to customize settings.

#### Example `daemon.json`:

```json
{
  "storage-driver": "overlay2",
  "log-driver": "json-file",
  "insecure-registries": ["myregistry.local:5000"],
  "exec-opts": ["native.cgroupdriver=systemd"]
}
```

- Common settings include:

  - Default storage driver.
  - Registry mirrors.
  - Logging drivers.
  - Cgroup driver options.
  - Proxy configuration.

Restart the Docker service after editing:

```bash
sudo systemctl restart docker
```

---

## Summary of Locations

| Path                       | Purpose                                  |
| -------------------------- | ---------------------------------------- |
| `/var/lib/docker`          | Main Docker data directory               |
| `/var/lib/docker/overlay2` | Image and container file system layers   |
| `/var/run/docker.sock`     | Unix socket for CLI–daemon communication |
| `/etc/docker/daemon.json`  | Docker daemon configuration file         |

---

## Questions and Answers

### Q1: Can I change the Docker data directory?

**A**: Yes. Edit the systemd service or use `--data-root` in `daemon.json`:

```json
{
  "data-root": "/mnt/docker-data"
}
```

---

### Q2: What happens if I delete `/var/lib/docker`?

**A**: You will lose all containers, images, and volumes. It effectively resets
Docker to a fresh install.

---

### Q3: Is `/var/run/docker.sock` safe to expose?

**A**: No. Anyone with access to this socket can control Docker and, by
extension, the host. It’s equivalent to root access.

---

### Q4: Where are Docker logs stored?

**A**: By default, container logs are under:

```
/var/lib/docker/containers/<container-id>/<container-id>-json.log
```

Log location can be changed via the logging driver in `daemon.json`.

---

### Q5: Does Windows have the same paths?

**A**: No. Docker Desktop on Windows uses a lightweight Linux VM. These paths
exist **inside** that VM, not on the host Windows filesystem.
