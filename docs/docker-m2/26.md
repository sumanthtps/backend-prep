---

title: Other Helpful Dockerfile Commands
sidebar_position: 53
---------------------

## Overview

In this section, we look at **other powerful but often underused Dockerfile commands** that improve readability, usability, and security of Docker images.

These commands are:

* `LABEL`
* `WORKDIR`
* `USER`
* `EXPOSE`

We'll explore how they work, **when to use them**, and **common mistakes to avoid**.

---

## 1. `LABEL` ‚Äî Adding Metadata

### ‚úÖ Purpose:

`LABEL` allows you to attach key-value metadata to your Docker image.

```dockerfile
LABEL maintainer="yourname@example.com"
LABEL version="1.0"
LABEL description="My awesome web server"
```

### üîç Use Case:

- Documentation
- Tooling support (e.g., CI/CD pipelines, scanners, dashboards)
- Easier to query with `docker inspect`

### ‚úÖ Best Practices:

- Replace deprecated `MAINTAINER` with `LABEL maintainer=...`
- Use semantic keys (e.g., `org.label-schema.*` or `org.opencontainers.image.*`
  standards)

### ‚ùå Misuse:

- Labels **do not affect** container behavior
- Overuse leads to bloat or irrelevant metadata

---

## 2. `WORKDIR` ‚Äî Default Working Directory

### ‚úÖ Purpose:

Sets the **default directory** for:

- `RUN` commands (at build time)
- container **entrypoint** and `CMD` at runtime

```dockerfile
WORKDIR /app
COPY . .
RUN npm install
```

### üß† Equivalent to:

```dockerfile
RUN cd /app && npm install
```

### ‚úÖ Benefits:

- No need to chain `cd` in `RUN`
- Makes Dockerfile cleaner and readable
- Last `WORKDIR` is used in runtime containers

### üîÅ Multiple Usage:

```dockerfile
WORKDIR /app
RUN pwd   # /app

WORKDIR /app/src
RUN pwd   # /app/src
```

---

## 3. `USER` ‚Äî Run Commands as a Non-Root User

### ‚úÖ Purpose:

Changes the user **for subsequent RUN instructions and runtime**.

```dockerfile
RUN useradd -ms /bin/bash appuser
USER appuser
```

### üîê Why Use:

- By default, Docker containers run as `root`, which is risky
- Running as a **non-root user** improves container **security posture**

### üîÅ Similar to `WORKDIR`:

- Can be declared multiple times
- Last one affects final container behavior

### üß™ Override at Runtime:

```bash
docker run --user root myimage
```

### ‚ùå Common Mistake:

Only creating a user but **not switching to it** using `USER`.

---

## 4. `EXPOSE` ‚Äî Document Ports

### ‚úÖ Purpose:

Informs Docker and users that the container **intends to listen** on a specific
port.

```dockerfile
EXPOSE 8080
```

### üî• Important Notes:

- **Does NOT actually publish** the port
- Still need to use `-p` when running container:

```bash
docker run -p 8080:8080 myimage
```

### üß† Think of it as:

> _‚ÄúThis app runs on this port by default‚Äù_

---

## üß™ Example Dockerfile Using All

```dockerfile
FROM node:20

LABEL maintainer="admin@example.com"

WORKDIR /app

COPY . .

RUN useradd -ms /bin/bash appuser \
 && chown -R appuser /app

USER appuser

RUN npm install

EXPOSE 3000

CMD ["node", "server.js"]
```

---

## üß† Summary Table

| Command   | What it does                    | Affects         | Notes                               |
| --------- | ------------------------------- | --------------- | ----------------------------------- |
| `LABEL`   | Adds metadata to image          | Build only      | Use `docker inspect` to view        |
| `WORKDIR` | Sets working directory          | Build + Runtime | Cleaner than chaining `cd` in `RUN` |
| `USER`    | Sets the user for RUN + runtime | Build + Runtime | Helps security by avoiding `root`   |
| `EXPOSE`  | Documents expected port(s)      | Runtime         | Does not publish port; just informs |

---

## ‚ùì Questions and Answers

### Q1: Does `EXPOSE` make the port publicly accessible?

**No**. You still have to explicitly use `-p` or `--publish`:

```bash
docker run -p 80:80 myimage
```

---

### Q2: Can I switch users multiple times?

**Yes**. Example:

```dockerfile
USER root
RUN apt install curl

USER appuser
```

This is useful for installations that need root privileges but apps should not
run as root.

---

### Q3: How can I verify `LABEL` values?

```bash
docker image inspect myimage
```

Look under `.Config.Labels` section.

---

### Q4: Is `WORKDIR` like `cd`?

Yes, but it‚Äôs **persistent across layers**:

```dockerfile
WORKDIR /app
RUN pwd    # Output: /app
```

---

## ‚úÖ Recap

- `LABEL` adds searchable metadata to images
- `WORKDIR` sets persistent working directory
- `USER` changes the executing user (for security)
- `EXPOSE` documents intended container ports

Use these to write **production-ready**, **well-documented**, and **secure**
Dockerfiles.

---
