---
id: docker-image-registries
title: Introduction to Docker Registries
sidebar_label: Docker Image Registries
sidebar_position: 83
---

## Summary

Docker image registries solve the problem of distributing container images
reliably across teams, environments, and systems. Instead of manually sharing
`.tar` files and using `docker save`/`docker load`, registries provide a
centralized location for storing and pulling images via `docker push` and
`docker pull`.

---

## Key Concepts

### What is a Docker Image Registry?

A **Docker image registry** is a web server that stores container images. It
supports:

- Uploading images (`docker push`)
- Downloading images (`docker pull`)
- Organizing images with tags and digests
- Authenticating users and securing access

Popular registries include:

- Docker Hub (default public registry)
- GitHub Container Registry
- AWS ECR, Azure Container Registry, GCP Artifact Registry
- Custom/self-hosted registries

### Why not use `docker save` / `docker load`?

Using `docker save` creates a `.tar` archive of the image. You then use
`docker load` to import it. This is inefficient because:

- File transfer becomes painful for large images
- Image authenticity and integrity can't be easily verified
- No built-in versioning, tagging, or digest guarantees
- It doesn't scale across teams or CI/CD pipelines

### Benefits of Using Registries

- **Version control** via tags (e.g., `v1.2`, `latest`)
- **Digest-based immutability** ensures consistency
- **Push once, pull anywhere**
- **Secure access** (authentication + TLS)

---

## Creating a Simple Local Registry

You can start a basic registry container with:

```bash
docker run --rm -d -p 5000:5000 --name registry registry:2
```

This runs the official `registry:2` container:

- Port 5000 exposed (default registry port)
- Container detached (`-d`)
- Automatically removed when stopped (`--rm`)

### Tagging and Pushing an Image

To push an image to your local registry:

```bash
docker tag my-image:latest localhost:5000/my-image:latest
docker push localhost:5000/my-image:latest
```

You can verify with:

```bash
docker rmi localhost:5000/my-image
docker rmi my-image
docker run --rm localhost:5000/my-image
```

If the app runs, Docker successfully pulled it from your local registry.

---

## Multi-Platform Images with Manifest Lists

Multi-platform images are required when your consumers use different CPU
architectures (e.g., x86, ARM). Docker supports this via **manifest lists**.

### Step-by-Step to Push Multi-Arch Images:

1. **Tag platform-specific images:**

```bash
docker tag my-image:latest-arm localhost:5000/my-image:latest-arm
docker tag my-image:latest localhost:5000/my-image:latest
```

2. **Push both:**

```bash
docker push localhost:5000/my-image:latest-arm
docker push localhost:5000/my-image:latest
```

3. **Create manifest list:**

```bash
docker manifest create --insecure localhost:5000/my-image \
  --amend localhost:5000/my-image:latest \
  --amend localhost:5000/my-image:latest-arm
```

4. **Inspect manifest list:**

```bash
docker manifest inspect localhost:5000/my-image
```

This shows platform mappings like:

```json
"platform": {
  "architecture": "amd64",
  "os": "linux"
}
```

5. **Push the manifest list itself:**

```bash
docker manifest push localhost:5000/my-image
```

---

## Verifying Multi-Arch Image Pull

You can force Docker to pull for a specific platform:

```bash
docker run --rm --platform linux/arm localhost:5000/my-image
```

If QEMU emulation is configured correctly, the container will run successfully,
even on x86 machines.

---

## INFO PANEL

> **Note:** Local registries without HTTPS support must be explicitly marked as
> `--insecure` when working with manifest lists. Docker CLI will refuse secure
> manifest operations otherwise.

---

## Questions & Answers

**Q1: What happens if you try to push a manifest list before pushing the actual
images?** **A1:** Docker will error out. The `docker manifest create` command
queries the registry for image digests. If they're missing, it fails.

**Q2: Can multiple platforms share the same image digest in the manifest list?**
**A2:** No. Each platform must have its own image build and corresponding
digest. Thatâ€™s why pushing the image variants is mandatory before manifest
creation.

**Q3: What is the purpose of `--amend` in `docker manifest create`?** **A3:** It
tells Docker to add specific image variants (by tag) into the manifest list.

**Q4: Does Docker Hub support multi-arch images?** **A4:** Yes. Docker Hub,
GitHub Container Registry, and most cloud providers support multi-arch manifest
lists.

**Q5: Why are digest-based image pulls more reliable than tag-based pulls?**
**A5:** Tags can be re-used or overwritten. Digests are immutable hashes of
image content and layers, ensuring exact reproducibility.

