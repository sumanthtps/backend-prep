---
sidebar_position: 4
---
# Indexes
Indexes speed up database queries by **reducing the amount of data PostgreSQL needs to scan**. Without indexes, PostgreSQL performs a **sequential scan** (checking every row).  

---

## **1ï¸âƒ£ Types of Indexes in PostgreSQL**  

| Index Type  | Use Case | Best For |
|-------------|---------|----------|
| **B-tree** (default) | General-purpose indexing | Most queries (`=`, `<`, `>`, `BETWEEN`) |
| **Hash** | Faster equality comparisons | `WHERE column = value` |
| **GIN (Generalized Inverted Index)** | Full-text search, JSONB, arrays | Text search, JSONB, arrays |
| **BRIN (Block Range Indexing)** | Large, sorted datasets | Very large tables (e.g., logs) |

---

## **2ï¸âƒ£ B-tree Index (Default)**
Most common index, **self-balancing tree** structure.  
âœ… **Best for:** Searching, sorting (`ORDER BY`), range queries (`<, >, BETWEEN`).  

âœ… **Example:**  
```sql
CREATE INDEX idx_users_email ON users(email);
```
ğŸš€ **Use Case:** Faster `SELECT` on email searches.  

---

## **3ï¸âƒ£ Hash Index**  
âœ… **Best for:** **Equality checks (`=`)** but **not** range queries.  
ğŸš€ **Example:**  
```sql
CREATE INDEX idx_users_id_hash ON users(id) USING HASH;
```
âš ï¸ **Limitation:** Cannot support range queries (`<, >, BETWEEN`).  

---

## **4ï¸âƒ£ GIN Index (Full-Text Search, JSONB, Arrays)**  
âœ… **Best for:** Searching **JSONB, text, or array fields**.  

âœ… **Example (JSONB search):**  
```sql
CREATE INDEX idx_users_data ON users USING GIN (data);
```
ğŸš€ **Use Case:** Searching **nested JSON fields** efficiently.  

âœ… **Example (Full-Text Search):**  
```sql
CREATE INDEX idx_articles_content ON articles USING GIN (to_tsvector('english', content));
```
ğŸš€ **Use Case:** Searching text efficiently in articles.  

---

## **5ï¸âƒ£ BRIN Index (Large Sorted Tables)**  
âœ… **Best for:** Very large **time-series or log data**.  

âœ… **Example:**  
```sql
CREATE INDEX idx_logs_timestamp ON logs USING BRIN (created_at);
```
ğŸš€ **Use Case:** Efficient **indexing of time-series data**.  

---

## **6ï¸âƒ£ Partial Indexes (Indexing Only Some Rows)**  
âœ… **Example:** Index only **active users**:  
```sql
CREATE INDEX idx_active_users ON users(email) WHERE is_active = true;
```
ğŸš€ **Use Case:** Saves space and speeds up queries for **filtered datasets**.  

---

## **7ï¸âƒ£ Covering Indexes (Indexing Selected Columns Only)**  
âœ… **Example:**  
```sql
CREATE INDEX idx_users_partial ON users (email) INCLUDE (name);
```
ğŸš€ **Use Case:** **Reduces disk access** when queries need `email` + `name`.  

---

## **ğŸ“ Quiz - Indexes in PostgreSQL**
1ï¸âƒ£ What is the default index type in PostgreSQL?  
2ï¸âƒ£ Which index is best for **JSONB and full-text search**?  
3ï¸âƒ£ Can a **hash index** be used for range queries (`<, >, BETWEEN`)?  
4ï¸âƒ£ When should you use a **BRIN index**?  
5ï¸âƒ£ How do **partial indexes** improve performance?  

Drop your answers, and I'll review them before moving to the next topic! ğŸš€

Excellent answers! Letâ€™s review them:  

1ï¸âƒ£ **Correct!** âœ… The **default index type in PostgreSQL is B-tree**. Itâ€™s used for most general-purpose queries.  

2ï¸âƒ£ **Correct!** âœ… **GIN (Generalized Inverted Index)** is the best choice for **JSONB, full-text search, and arrays** because it efficiently searches inside complex data structures.  

3ï¸âƒ£ **Correct!** âœ… **Hash indexes** can only be used for **equality (`=`) comparisons**, not for range queries (`<, >, BETWEEN`).  

4ï¸âƒ£ **Correct!** âœ… **BRIN (Block Range Indexing)** is ideal for **large, sorted datasets** like time-series or log data because it indexes ranges of data instead of individual rows.  

5ï¸âƒ£ **Correct!** âœ… **Partial indexes** save space and improve performance by **indexing only a subset of rows** that match a condition, reducing unnecessary indexing overhead.  

ğŸ”¥ **Score: 5/5!** Perfect! ğŸ¯  

---

### **Next Topic: Transactions & Concurrency Control** ğŸš€  
We'll cover **ACID properties, COMMIT, ROLLBACK, SAVEPOINT, and isolation levels** next. Ready? (y/n)